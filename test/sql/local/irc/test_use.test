# name: test/sql/local/irc/test_use.test
# description: test integration with iceberg catalog read
# group: [iceberg]

require-env ICEBERG_SERVER_AVAILABLE

require parquet

require iceberg

require httpfs

require aws

mode skip

statement ok
CREATE SECRET glue_secret (
    TYPE S3,
    PROVIDER credential_chain,
    CHAIN 'sts',
    ASSUME_ROLE_ARN 'arn:aws:iam::840140254803:role/pyiceberg-etl-role',
    REGION 'us-east-1'
);

statement ok
ATTACH 'iceberg-testing' AS my_datalake (TYPE ICEBERG, CATALOG 'GLUE', ACCOUNT_ID 840140254803);

mode output_result